# DB Version: 17
# OS Type: linux
# DB Type: high-write/read queue
# Total Memory (RAM): 64 GB
# CPUs num: 32
# Connections num: 100
# Data Storage: io2 ssd (12k IOPS)

# ---- Memory ----
max_connections = 500
shared_buffers = 16GB
effective_cache_size = 48GB
work_mem = 64MB
maintenance_work_mem = 2GB
huge_pages = try

# ---- WAL / Checkpoints ----
wal_level = replica
wal_compression = on
wal_buffers = 128MB
min_wal_size = 4GB
max_wal_size = 32GB
checkpoint_timeout = 15min
checkpoint_completion_target = 0.9
synchronous_commit = on

# ---- Planner / IO ----
default_statistics_target = 100
random_page_cost = 1.1
effective_io_concurrency = 200

# ---- Parallelism ----
max_worker_processes = 32
max_parallel_workers = 32
max_parallel_workers_per_gather = 8
max_parallel_maintenance_workers = 4

# ---- Autovacuum (global, moderate) ----
autovacuum_max_workers = 5
autovacuum_naptime = 10s
autovacuum_vacuum_cost_limit = 5000
autovacuum_vacuum_cost_delay = 2ms

commit_delay = 20        # microseconds to wait before flush
commit_siblings = 5      # only if â‰¥5 backends are active